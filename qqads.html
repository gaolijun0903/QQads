<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>QQ-ads</title>
    <meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no, width=device-width">
    <style>
    *{
        margin: 0;
        padding: 0;
    }
    html,
    body {
        width: 100%;
        height: 100%;
    }
    ul,li{
    	list-style: none;
    }
    #newslist{
		width:100%;
		height: 100%;
		overflow: hidden;
	}
	.listitem{
		height: 150px;
		border: 1px solid #CCCCCC;
		margin-bottom: 5px;
	}
	
	/*这是必须的*/
    #wapper {
    	position: relative;
        width: 100%;
        height: 100%;
    }
    #innerpic {
        height: 100%;
        -webkit-user-select:none; -moz-user-select:none; -ms-user-select:none; user-select:none;
    }

   </style>
</head>

<body>
	<div id="newslist">
		<ul>
			<li class="listitem">这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻</li>
			<li class="listitem">这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻</li>
			<li class="listitem">这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻</li>
			<li class="listitem">这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻</li>
			<li class="listitem">这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻</li>
			<li class="listitem">这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻</li>
			<li class="listitem">这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻</li>
			<li class="listitem">这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻</li>
			<li class="listitem">这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻</li>
			<li id="ads" class="listitem">
				<div id="wapper">
			    	<div id="innerpic"></div>
			    </div>
			</li>
			<li class="listitem">这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻</li>
			<li class="listitem">这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻</li>
			<li class="listitem">这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻</li>
			<li class="listitem">这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻</li>
			<li class="listitem">这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻</li>
			<li class="listitem">这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻这是一条新闻</li>
		</ul>
	</div>
   	<script src="js/bscroll.min.js"></script> 
   	<script src="js/jquery-2.0.0.min.js"></script> 
   	<script src="js/qqads.js"></script> 
   	<script>
   		var radius = 0,
   			centerX = 50,
   			centerY = 50,
		    containerHeight = $("#newslist").height(),	//滚动部分容器高度
	        topHeight = $("#ads").position().top,	//与父元素顶部的偏移量
	        selfHeight = $("#ads").height(),  //承载图片的自身高度
	        selfWidth = $("#ads").width(),
        	top1 = topHeight-containerHeight+selfHeight+ 50,  //承载图片的li元素底部与容器container底部齐平时，已滚动的高度
          	maxRadius = Math.sqrt( Math.pow((selfHeight-50),2) + Math.pow((selfWidth-50),2)).toFixed(0),  //擦除的最大半径
   			scroll = new BScroll($('#newslist')[0],{probeType:3});
   			
   		scroll.on("scroll",function(pos){
   			var direction =scroll.movingDirectionY;  //该属性需要v1.5.5以上
	        if( direction === 0 ) return false;
	        
	        var range = (-pos.y- top1).toFixed(0);
			//console.log("range",range)	        
   			if(range>=0 && range<400){
   				radius = range/400*maxRadius;
   				if(direction===1){//向上滚动
		        	myQQ.clearCircle(centerX,centerY,radius);
		       	}else if(direction===-1){//向下滚动
		        	myQQ.recoverCircle(centerX,centerY,radius);
		        }
   			}else if(range>400){
   				centerX = selfWidth-50;
   				centerY = selfHeight-50;
   			}else if(range<0){
   				centerX = 50;
   				centerY = 50;
   			}
   		})
   		
   		/*//版本不支持方向的话，自己判断
   		var beforeScrollTop = topHeight;
   		scroll.on("scroll",function(pos){
   			var afterScrollTop = pos.y,
	            delta = afterScrollTop - beforeScrollTop;
	        if( delta === 0 ) return false;
	        var range = (-pos.y- top1).toFixed(2);
   			if(range>=0 && range <400){
     				//console.log("range",range)
   				radius = range/400*selfWidth;
   				if(delta<0){
		        	myQQ.clearCircle(centerX,centerY,radius);
		       	}else{
		        	myQQ.recoverCircle(centerX,centerY,radius);
		        }
   			}
	        beforeScrollTop = afterScrollTop;
   		})*/
   		
   	</script>
    <script>
	var myQQ = QQads.case({
		wapperDiv:document.getElementById('wapper'),
        innerpic:document.getElementById('innerpic'),
        coverImg:'img/avatar.jpeg',
        bgImg:"img/qiu.jpg"
    });
    </script>
</body>

</html>
